\documentclass[DIV=11, BCOR=0mm, paper=a4, fontsize=11pt, parskip=half, twoside=false, titlepage=true]{scrartcl}

\usepackage{subfiles}


\usepackage[singlespacing]{setspace} 
\usepackage{lastpage}
\usepackage[automark, headsepline]{scrlayer-scrpage}
\clearscrheadings
\setlength{\headheight}{\baselineskip}
\automark{section} % mit [] wird Argument in [] für links, {} rechts genommen
\automark*{subsection} % write section in footline instead of chapter (if there is one)
%\automark*{subsection}
\ihead{\headmark}
%\ohead[]{Seite~\thepage}
\cfoot{{\hypersetup{linkcolor=black}Page~\thepage~of~\pageref{LastPage}}}

\usepackage[utf8]{inputenc}
\usepackage[ngerman, english]{babel}
\usepackage[expansion=true, protrusion=true]{microtype}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{mathdots}
\usepackage{upgreek}
\usepackage[free-standing-units]{siunitx}
\usepackage{esvect}
\usepackage{graphicx}
\usepackage{epstopdf}
\usepackage[hypcap]{caption}
\usepackage{booktabs}
\usepackage{flafter}
\usepackage[section]{placeins}
\usepackage{pdfpages}
\usepackage{textcomp}
\usepackage{subfig}
\usepackage{floatpag} % to have clear pages where figures are
\usepackage[italicdiff]{physics}
\usepackage{xparse}
\usepackage{wrapfig}
\usepackage{color}
\usepackage{xcolor}
\usepackage{colortbl}
\usepackage{multirow}
\usepackage{array} % needed to define fancy table cells
\usepackage{diagbox} % needed for double colored table cells
\usepackage{dsfont}
\numberwithin{equation}{section}
\numberwithin{figure}{section}
\numberwithin{table}{section}
\usepackage{empheq}
\usepackage{tikz}
\usepackage{tikz-cd}%für Kommutationsdiagramme
\usepackage{forest}%Baumdiagramme
\usepackage{mdframed}

\usepackage{hyperref}
\hypersetup{colorlinks=true, breaklinks=true, citecolor=linkblue, linkcolor=linkblue, menucolor=linkblue, urlcolor=linkblue} %sonst z.B. orange bei linkcolor

\usepackage{imakeidx}%für Erstellen des Index
\usepackage{xifthen}%damit bei \Def{} das Index-Arugment optional gemacht werden kann

\usepackage[printonlyused]{acronym}%withpage -> seems useless here

\usepackage{enumerate} % for custom enumerators

\usepackage{listings} % to input code

\usepackage{csquotes} % to change quotation marks all at once

%\usepackage[nottoc, notlot, notlof, chapter]{tocbibind} %macht automatisch ins TOC, auch index und andere Sachen; so ungenummert, es geht aber auch mit Option numbib -> nicht nötig jetzt

%\usepackage[maxcitenames=3, backend=biber]{biblatex}%vlt hätte maxnames=2 gepasst


%man muss wohl Pakete mit Matheschrift zuerst laden
%\usepackage{mathpazo}%hä lol, das stellt überall pagella ein, erlaubt aber noch Modifikation?! Besser als pagella einzeln laden sogar -> ah, man kann aber z.B. noch Times auch einstellen hinterher; sieht jetzt aber nicht unbedingt überragend aus, Times da mein Favorit
%\usepackage{euler} %macht Fehler und sieht nichtmal so nice aus

%Versuch nur in Mathe Modus anzumachen, geht wohl in pdflatex nicht
%\usepackage{xfrac,unicode-math}
%\defaultfontfeatures{Scale=MatchLowercase}
%\setmathfont{TeX Gyre Termes Math}{version=termes}
%\setmathfont{TeX Gyre Pagella Math}{version=pagella}

% Versuch zwei -> nope, man braucht wohl XeLatex
%\usepackage{fontenc,xunicode}
%\setmathrm{Optima}

% Version 3
\usepackage{newtxmath} %geil, macht Times an in Mathe (ist stark, wenn auch zu dick bei Nutzen von Standard Computer Modern); muss auf jeden Fall rein bei Schrift Times, sonst sieht das im Vergleich viel zu dünn aus (auch bei pagella eigentlich)
%newtxtext funktioniert nicht, aber dafür ist ja auch tgtermes da

%\usepackage{tgtermes}
%\usepackage{cmbright}%ihhhhhhhh
\usepackage{tgpagella}
\setkomafont{section}{\rmfamily\Large\bfseries}
\setkomafont{sectionentry}{\large\bfseries}
\setkomafont{subsection}{\rmfamily\large\scshape}%textsc%\textsl auch not bad
\setkomafont{title}{\bfseries}%von pagella ein
\setkomafont{subtitle}{\Large\scshape}
\setkomafont{author}{\Large\slshape}
%\setkomafont{date}{\Large\slshape}
\setkomafont{pagehead}{\scshape}
\setkomafont{pagefoot}{\slshape}
\setkomafont{captionlabel}{\bfseries}
%\mathversion{qpl}



\definecolor{mygreen}{rgb}{0.8,1.00,0.8}
\definecolor{mycyan}{rgb}{0.76,1.00,1.00}
\definecolor{myyellow}{rgb}{1.00,1.00,0.76}
\definecolor{defcolor}{rgb}{0.10,0.00,0.60} %{1.00,0.49,0.00}%orange %{0.10,0.00,0.60}%aquamarin %{0.16,0.00,0.50}%persian indigo %{0.33,0.20,1.00}%midnight blue
\definecolor{linkblue}{rgb}{0.00,0.00,1.00}%{0.10,0.00,0.60}


% auch gut: green!42, cyan!42, yellow!24

%Syntax Farbboxen: in normalem Text \colorbox{mygreen}{Text} oder bei Anmerkungen in Boxen \fcolorbox{black}{myyellow}{Rest der Box}, in Mathe-Umgebung für farbige Box \begin{empheq}[box = \colorbox{mycyan}]{align}\label{eq:} Formel \end{empheq} oder farbigen Rand \begin{empheq}[box = \fcolorbox{mycyan}{white}]{align}\label{eq:} Formel \end{empheq}

\setlength{\fboxrule}{0.76pt}
\setlength{\fboxsep}{1.76pt}

\newcommand{\anm}[1]{\fcolorbox{black}{yellow!24}{\parbox[c]{0.985\textwidth}{\textbf{Anmerkung}: #1}}}

%\newcommand{\anm}[1]{\footnote{#1}}

\newcommand{\anmind}[1]{\fcolorbox{black}{yellow!24}{\parbox[c]{0.92 \textwidth}{\textbf{Anmerkung}: #1}}}
% wegen Einrückung in itemize-Umgebungen o.Ä.

\newcommand{\eqbox}{\fcolorbox{white}{cyan!24}}

\newcommand{\textbox}[1]{\fcolorbox{white}{cyan!24}{#1}}


\newcommand{\Def}[2][]{\textcolor{defcolor}{\fontfamily{ptm}\selectfont \textit{#2}}\ifthenelse{\isempty{#1}}{\index{#2}}{\index{#1}}}%{\colorbox{green!0}{\textit{#1}}}
% zwischendurch Test mit \textbf{#1} noch (wurde aber viel größer)

% habe jetzt Schrift (font) pagella reingehauen, ist mega

% wenn Farbe doch doof, einfach beide auf white :D




\mdfdefinestyle{defistyle}{topline=false, rightline=false, linewidth=1pt, frametitlebackgroundcolor=gray!12}

\mdfdefinestyle{satzstyle}{topline=true, rightline=true, leftline=true, bottomline=true, linewidth=1pt}

\mdfdefinestyle{bspstyle}{%
rightline=false,leftline=false,topline=false,%bottomline=false,%
backgroundcolor=gray!8}% tried imitation of spruce from beamer with black!20!white


\mdtheorem[style=defistyle]{defi}{Definition}[section]
\mdtheorem[style=satzstyle]{thm}[defi]{Theorem}
\mdtheorem[style=satzstyle]{lem}[defi]{Lemma}
\mdtheorem[style=satzstyle]{cor}[defi]{Corollary}
\mdtheorem[style=satzstyle]{prop}[defi]{Property}
\mdtheorem[style=bspstyle]{ex}[defi]{Example}
% just have one, Property, instead of Theorem, Lemma, Corollary?


\newtheoremstyle{rem}
  {\topsep}{\topsep}
  {}{}%{\centering}{0.1\textwidth}
  {\bfseries}{\textbf{remark}:}
  { }{}
\theoremstyle{rem}
% might be unnecessary now

\mdfdefinestyle{remstyle}{%
rightline=false,leftline=false,topline=false,bottomline=false,%
backgroundcolor=myyellow,innerleftmargin=.4\baselineskip,innerrightmargin=.4\baselineskip,leftmargin=-.4\baselineskip,rightmargin=-.4\baselineskip}%setting the indentations is important because otherwise, everything will be indented (.4\baselineskip is default and looks natural, so this is chosen; the effects of margin and innermargin have to be balanced)
%,frametitle={\textbf{remark}: }}%frametitle also makes linebreak

\newmdenv[style=remstyle]{remark}%{remark}
%\newmdtheoremenv[style=remstyle]{rem}{remark}
%\mdtheorem[style=remstyle]{rem}{remark:}%allows use of \begin{rem*} for no numbering

%\newcommand{remark}[1]{\begin{rem*}: #1\end{rem*}}
%use of begin, end is not allowed before \begin{document}


%Lösung (also Umgehen von Verbot \begin{} in Präambel) kommt von: https://www.mrunix.de/forums/showthread.php?59532-begin-und-end-in-newcommand
\def\brem#1\erem{\begin{remark}#1\end{remark}}
\newcommand{\rem}[1]{\brem \textbf{remark:} #1\erem}
% finally, now \rem{} is a shortcut for \begin{remark} etc.

% new line not always wanted for remarks, thus change to this here
\usepackage{soul}
\sethlcolor{myyellow}
\newcommand{\question}[1]{\hl{#1}}


% Anpassung von itemize-Symbolen
\renewcommand{\labelitemi}{$\blacktriangleright$}%{$\vartriangleright$}
\renewcommand{\labelitemii}{\textbf{--}} % is also default there
\renewcommand{\labelitemiii}{$\bullet$}


% Shortcuts -> falls man Abkürzung mal ändern will, muss man dann nicht den ganzen Text durchgehen
\usepackage{xspace} %weil man sonst \gw{} callen muss, damit Leerzeichen danach erkannt werden.
\newcommand{\gw}{{\hypersetup{linkcolor=black}\ac{gw}}\xspace}
\newcommand{\gws}{{\hypersetup{linkcolor=black}\acp{gw}}\xspace}

\newcommand{\mi}{{\hypersetup{linkcolor=black}\ac{mi}}\xspace}

\newcommand{\art}{{\hypersetup{linkcolor=black}\ac{art}}\xspace}

% wenn was nicht klappt, dann \gw{} callen
% mit diesem Ding leider kene Nutzung in Überschriften möglich

%\newcommand{\Var}{{\fontfamily{ptm}\selectfont\text{var}}}
%\newcommand{\Cov}{{\fontfamily{ptm}\selectfont\text{cov}}}
%\newcommand{\Corr}{{\fontfamily{ptm}\selectfont\text{corr}}}

% this is better, auto-select fonts etc
\DeclareMathOperator{\Var}{var}
\DeclareMathOperator{\Cov}{cov}
\DeclareMathOperator{\Corr}{corr}


%\renewcommand{\bibname}{References}
\addto\captionsenglish{\renewcommand{\bibname}{References}}



% if float is too long use \thisfloatpagestyle{onlyheader}
\newpairofpagestyles{onlyheader}{%
\setlength{\headheight}{\baselineskip}
\automark[section]{section}
%\automark*[section]{subsection}
\ihead[]{\headmark}
%
% only change to previous settings is here
\cfoot{}
}


\newpairofpagestyles{onlyfooter}{%
\setlength{\headheight}{\baselineskip}
\automark[section]{section}
%\automark*[section]{subsection}
\ihead[]{}
%
% only change to previous settings is here
\cfoot{{\hypersetup{linkcolor=black}Page~\thepage~of~\pageref{LastPage}}}
}



% for dartboard (from https://de.overleaf.com/latex/templates/dartboard/bhpfmdvjsjmk)
\tikzstyle{wired}=[draw=gray!30, line width=0.15mm]
\tikzstyle{number}=[anchor=center, color=white]
%%%<
\usepackage{verbatim}
%%%>
\begin{comment}
:Title: Dartboard
:Tags: Foreach; Node positioning
:Author: Roberto Bonvallet
:Slug: dartboard
\end{comment}

% Sectors are numbered 0-19 counterclockwise from the top.

% \strip{color}{sector}{outer_radius}{inner_radius}
\newcommand{\strip}[4]{
    \filldraw[#1, wired]
      ({18 *  #2}      :                   #3) arc
      ({18 *  #2}      : {18 * (#2 + 1)} : #3) --
      ({18 * (#2 + 1)} :                   #4) arc
      ({18 * (#2 + 1)} : {18 *  #2}      : #4) -- cycle;
}

% \sector{color}{sector}{radius}
\newcommand{\sector}[3]{
    \filldraw[#1, wired]
      (0, 0) --
      ({18 * #2} :                   #3) arc
      ({18 * #2} : {18 * (#2 + 1)} : #3) -- cycle;
}